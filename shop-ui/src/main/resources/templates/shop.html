<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<div th:replace="fragments/head :: head"></div>

<body>

<div th:replace="fragments/login-form :: navigation(activeTab)"></div>

<!-- Search Wrapper Area Start -->
<div class="search-wrapper section-padding-100">
    <div class="search-close">
        <i class="fa fa-close" aria-hidden="true"></i>
    </div>
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="search-content">
                    <form action="#" method="get">
                        <input type="search" name="search" id="search" placeholder="Type your keyword...">
                        <button type="submit"><img th:src="@{/img/core-img/search.png}" alt=""></button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Search Wrapper Area End -->

<!-- ##### Main Content Wrapper Start ##### -->
<div class="main-content-wrapper d-flex clearfix">

    <!-- Mobile Nav (max width 767px)-->
    <div class="mobile-nav">
        <!-- Navbar Brand -->
        <div class="amado-navbar-brand">
            <a href="index.html"><img th:src="@{img/core-img/logo.png}" alt=""></a>
        </div>
        <!-- Navbar Toggler -->
        <div class="amado-navbar-toggler">
            <span></span><span></span><span></span>
        </div>
    </div>

    <!-- Header Area Start -->
    <div th:replace="fragments/menu :: menu"></div>
    <!-- Header Area End -->

    <div class="shop_sidebar_area">

        <!-- ##### Single Widget #####  th:href="@{/product}"                          th:action="@{/product}"-->
        <form th:object="${filter}">

            <div class="widget catagory mb-50">
                <!-- Widget Title -->
                <h6 class="widget-title mb-30">Catagories</h6>

                <!--  Catagories  -->
                <div class="catagories-menu">
                    <ul>
    <!--                    <li class="active"><a href="#">Chairs</a></li>-->
                        <li class="" th:each="category : ${categories}" th:classappend="${filter.category == (category.name)} ? active">
                            <a th:href="@{/product/(category=${category.name})}"
                               th:text="${category.name}">Beds
                            </a>
                        </li>

<!--                        <li th:each="category : ${categories}">-->
<!--                            <input th:value="${category.name}" th:id="${category.id}" th:field="*{categories}"-->
<!--                                    type="checkbox" th:name="${category.name}">-->
<!--&lt;!&ndash;                                   th:checked="${product.containsCategory(category)}">&ndash;&gt;-->
<!--                            <label th:text="${category.name}" th:for="${category.id}">-->
<!--                                First radio-->
<!--                            </label>-->
<!--                        </li>-->

                    </ul>
                </div>
            </div>

            <!-- ##### Single Widget ##### -->
            <div class="widget brands mb-50">
                <!-- Widget Title -->
                <h6 class="widget-title mb-30">Brands</h6>

                <div class="widget-desc">
                    <!-- Single Form Check -->
                    <div th:each="brand : ${brands}" class="form-check">
                        <input
                                th:field="*{brands}"
                                th:value="${brand.name}"
                                th:id="${brand.name}"
                                name="myParam"
                                th:checked="${filter.containsBrand(brand.name)}"
                                class="form-check-input" type="checkbox" value="" >
                        <label class="form-check-label" th:for="${brand.name}" th:text="${brand.name}">Amado</label>
                    </div>
                </div>
            </div>


            <!-- ##### Single Widget ##### -->
            <div class="widget color mb-50">
                <!-- Widget Title -->
                <h6 class="widget-title mb-30">Color</h6>

                <div class="widget-desc">
                    <ul class="d-flex">
                        <li><a href="#" class="color1"></a></li>
                        <li><a href="#" class="color2"></a></li>
                        <li><a href="#" class="color3"></a></li>
                        <li><a href="#" class="color4"></a></li>
                        <li><a href="#" class="color5"></a></li>
                        <li><a href="#" class="color6"></a></li>
                        <li><a href="#" class="color7"></a></li>
                        <li><a href="#" class="color8"></a></li>
                    </ul>
                </div>
            </div>

            <!-- ##### Single Widget ##### -->
            <div class="widget price mb-50">
                <!-- Widget Title -->
                <h6 class="widget-title mb-30">Price</h6>

                <div class="widget-desc">
                    <div class="slider-range">
                        <div data-min="10" data-max="5000" data-unit="$" class="slider-range-price ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all" th:data-value-min="${minPrice}" th:data-value-max="${maxPrice}" data-label-result="">
                            <div class="ui-slider-range ui-widget-header ui-corner-all"></div>
                            <span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0"></span>
                            <span class="ui-slider-handle ui-state-default ui-corner-all" tabindex="0"></span>
                        </div>

                        <div class="">
                            <input th:field="*{minPrice}" hidden="true" type="number" min="0" step="0.1" th:value="${minPrice}" name="minPrice" id="minPrice" placeholder="Enter min price">
                            <input th:field="*{maxPrice}" hidden="true" type="number" min="0" step="0.1" th:value="${maxPrice}" name="maxPrice" id="maxPrice" placeholder="Enter max price">
                        </div>

                        <div th:text="'$' + ${minPrice} + ' - $' + ${maxPrice}" class="range-price">$10 - $5000</div>
                    </div>
                </div>
            </div>

            <br>


            <button type="submit" class="btn btn-primary mt-3">Update list</button>
        </form>
    </div>

    <div class="amado_product_area section-padding-100">
        <div class="container-fluid">

            <div class="row">
                <div class="col-12">
                    <div class="product-topbar d-xl-flex align-items-end justify-content-between">
                        <!-- Total Products -->
                        <div class="total-products">
                            <p>Showing 1-8 0f 25</p>
                            <div class="view d-flex">
                                <a href="#"><i class="fa fa-th-large" aria-hidden="true"></i></a>
                                <a href="#"><i class="fa fa-bars" aria-hidden="true"></i></a>
                            </div>
                        </div>
                        <!-- Sorting -->
                        <div class="product-sorting d-flex">
                            <div class="sort-by-date d-flex align-items-center mr-15">
                                <p>Sort by</p>
                                <form action="#" method="get">
                                    <select name="select" id="sortBydate">
                                        <option value="value">Date</option>
                                        <option value="value">Newest</option>
                                        <option value="value">Popular</option>
                                    </select>
                                </form>
                            </div>
                            <div class="view-product d-flex align-items-center">
                                <p>View</p>
                                <form th:method="post" th:action="@{/product}">
                                    <select name="pageSize" id="pageSize">
                                        <option value="2" >2</option>
                                        <option value="5">5</option>
                                        <option value="6">6</option>
                                        <option value="10">10</option>
                                    </select>
<!--                                    <button  type="submit">awdwad</button>-->
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div th:include="fragments/chat :: chat"/>


<!--            <form class="input-group mb-3">-->
<!--                <div class="input-group-prepend">-->
<!--                    <button type="submit" name="name" th:value="${filter.getName().get()}" class="input-group-text" id="name">Find by name</button>-->
<!--                </div>-->
<!--                <input type="text" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">-->
<!--            </form>-->

            <form class="input-group mb-3">
<!--                <label for="minPrice">Min price</label>-->
                <div class="input-group-prepend">
                    <button type="submit" class="input-group-text">Search</button>
                </div>

                <input th:value="${filter.getName().get()}"
                       class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" type="text" name="name" id="name" placeholder="Enter min price" >

            </form>


            <div class="row">

                <!-- Single Product Area -->
                <div th:each="product : ${productsPage.getContent()}" class="col-12 col-sm-6 col-md-12 col-xl-6" >
                    <div class="single-product-wrapper">
                        <!-- Product Image -->
                        <div class="product-img">
                            <img th:src="@{/picture/{pictureId}(pictureId=${product.getPictures().get(0).id})}" alt="">
                            <!-- Hover Thumb -->
                            <img class="hover-img" th:src="@{/picture/{pictureId}(pictureId=${product.getPictures().get(1).id})}" alt="">
                        </div>

                        <!-- Product Description -->
                        <div class="product-description d-flex align-items-center justify-content-between">
                            <!-- Product Meta Data -->
                            <div class="product-meta-data">
                                <div class="line"></div>
                                <p th:text="${product.price}" class="product-price">$180</p>
                                <a th:href="@{'/details/' + ${product.id}}">
                                    <h6 th:text="${product.name}">Modern Chair</h6>
                                </a>
                            </div>
                            <!-- Ratings & Cart -->
                            <div class="ratings-cart text-right">
                                <div class="ratings">
                                    <i class="fa fa-star" aria-hidden="true" th:each="star:${#numbers.sequence(1, product.calculateAverageRating())}"></i>
<!--                                    <i class="fa fa-star" aria-hidden="true"></i>-->
<!--                                    <i class="fa fa-star" aria-hidden="true"></i>-->
<!--                                    <i class="fa fa-star" aria-hidden="true"></i>-->
<!--                                    <i class="fa fa-star" aria-hidden="true"></i>-->
                                </div>
                                <div class="cart">
                                    <a th:href="@{'/cart/add/' + ${product.id}}" data-toggle="tooltip" data-placement="left" title="Add to Cart"><img th:src="@{img/core-img/cart.png}" alt=""></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="row">
                <div class="col-12">
                    <!-- Pagination -->
                    <nav aria-label="navigation" th:if="${productsPage.hasContent()}">
                        <ul class="pagination justify-content-end mt-50">
                            <li th:each="num: ${#numbers.sequence(1, productsPage.getTotalPages())}"
                                th:classappend="${num == productsPage.getNumber() + 1} ? 'active'"
                                class="page-item">
                                <a
                                    th:text="${num}+ '.'"
                                    th:href="@{/product(page=${num}, pageSize=${productsPage.getSize()})}"
                                    class="page-link">01.
                                </a>
                            </li>
<!--                            <li class="page-item"><a class="page-link" href="#">02.</a></li>-->
<!--                            <li class="page-item"><a class="page-link" href="#">03.</a></li>-->
<!--                            <li class="page-item"><a class="page-link" href="#">04.</a></li>-->
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- ##### Main Content Wrapper End ##### -->

<!-- ##### Newsletter Area Start ##### -->
<section class="newsletter-area section-padding-100-0">
    <div class="container">
        <div class="row align-items-center">
            <!-- Newsletter Text -->
            <div class="col-12 col-lg-6 col-xl-7">
                <div class="newsletter-text mb-100">
                    <h2>Subscribe for a <span>25% Discount</span></h2>
                    <p>Nulla ac convallis lorem, eget euismod nisl. Donec in libero sit amet mi vulputate consectetur. Donec auctor interdum purus, ac finibus massa bibendum nec.</p>
                </div>
            </div>
            <!-- Newsletter Form -->
            <div class="col-12 col-lg-6 col-xl-5">
                <div class="newsletter-form mb-100">
                    <form action="#" method="post">
                        <input type="email" name="email" class="nl-email" placeholder="Your E-mail">
                        <input type="submit" value="Subscribe">
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>


<!-- ##### Newsletter Area End ##### -->
<div th:replace="fragments/footer :: footer"></div>
<!-- ##### Footer Area Start ##### -->


</body>

</html>